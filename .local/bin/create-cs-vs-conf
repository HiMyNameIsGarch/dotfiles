#! /bin/sh

# get the values from current dir
basePath=$(pwd)
dotnetVersion=$(dotnet --version | cut -c 1-3)
projName="${basePath##*/}"

# write config to it
printf '%s\n' "{
  \"configurations\": {
     \"launch - netcoredbg\": {
       \"adapter\": \"netcoredbg\",
       \"configuration\": { 
         \"request\": \"launch\",
         \"program\":\"$basePath/bin/Debug/netcoreapp$dotnetVersion/$projName.dll\",
         \"args\": [],
         \"stopAtEntry\": true,
         \"cwd\": \""$basePath"\"
      }
    }
  }
}" > ".vimspector.json" 

