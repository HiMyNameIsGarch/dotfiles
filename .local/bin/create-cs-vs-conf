#! /bin/sh

# get the values from current dir

basePath=$(pwd)
dotnetVersion=$(echo "$(dotnet --version)" | head -c3)
projName=$(basename $basePath)
program="$basePath/bin/Debug/netcoreapp$dotnetVersion/$projName.dll"
fileName=".vimspector.json"

# make the file

touch $fileName

# write config to it

echo "{" >> $fileName
echo '  "configurations": {' >> $fileName
echo '    "launch - netcoredbg": {' >> $fileName
echo '      "adapter": "netcoredbg",' >> $fileName
echo '      "configuration": {' >> $fileName
echo '        "request": "launch",' >> $fileName
echo '        "program": "'"$program"'",' >> $fileName
echo '        "args": [],' >> $fileName
echo '        "stopAtEntry": true,' >> $fileName
echo '        "cwd": "'"$basePath"'"' >> $fileName
echo '      }' >> $fileName
echo '    }' >> $fileName
echo '  }' >> $fileName
echo '}' >> $fileName
